<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vote for Your Choice</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex justify-center items-center h-screen">

    <div class="bg-white shadow-lg rounded-xl p-6 text-center w-96">
        <h1 class="text-2xl font-bold mb-4 text-gray-700">Make Your Choice</h1>

        <button onclick="updateChoice('Option A')" 
            class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-xl transition-all duration-300 w-full mb-3">
            Vote for Option A
        </button>

        <button onclick="updateChoice('Option B')" 
            class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-xl transition-all duration-300 w-full">
            Vote for Option B
        </button>

        <p id="status" class="text-gray-500 mt-4 text-sm"></p>
    </div>

    <script>
        const repo = "your-username/your-repo"; // Replace with your repo
        const token = "ghp_yourGithubToken"; // Replace with your actual GitHub token
        const filePath = "data.json";

        async function updateChoice(choice) {
            const statusEl = document.getElementById("status");
            statusEl.textContent = "Submitting vote...";

            try {
                const url = `https://api.github.com/repos/${repo}/contents/${filePath}`;
                const response = await fetch(url, { headers: { Authorization: `token ${token}` } });
                const data = await response.json();
                const content = JSON.parse(atob(data.content));

                content[choice]++; // Increase the vote count

                const newContent = btoa(JSON.stringify(content, null, 2));
                await fetch(url, {
                    method: "PUT",
                    headers: { Authorization: `token ${token}`, "Content-Type": "application/json" },
                    body: JSON.stringify({ message: "Update choice", content: newContent, sha: data.sha }),
                });

                statusEl.textContent = `Vote for ${choice} submitted successfully!`;
            } catch (error) {
                console.error("Error updating choice:", error);
                statusEl.textContent = "Error submitting vote. Please try again.";
            }
        }
    </script>

</body>
</html>
